############
### NEMO ###
############

nerve_stapling = {
	potential = {
		has_technology = tech_nerve_stapling
	}
	
	option = {
		name = "nerve_stapling_not_allowed"
		
		on_enabled = {
			custom_tooltip = "nerve_stapling_illegal"
		}
		
		policy_flags = {
		  nerve_stapling_not_allowed
		}
		
		AI_weight = {
			modifier = {
				factor = 2
				OR = {
					has_ethic = "ethic_fanatic_individualist"
					has_ethic = "ethic_individualist"
				}
				NOT = {
					has_ethic = "ethic_fanatic_xenophobe"
					has_ethic = "ethic_xenophobe"
				}
			}
		}
	}
	
	option = {
		name = "nerve_stapling_allowed_xenos_only"
		
		potential = {
			num_communications > 0
    	has_technology = tech_nerve_stapling
  	}
		valid = {
			OR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
			}
		}
		policy_flags = {
			nerve_stapling_allowed_xenos_only
		}
		modifier = {}
		
		AI_weight = {
			modifier = {
				factor = 0
				has_valid_ai_personality = yes
				NOT = { has_ai_personality_behaviour = slaver }
			}		
			modifier = {
				factor = 0
				OR = {
					has_ethic = "ethic_fanatic_xenophile"
					has_ethic = "ethic_xenophile"
				}
			}
			modifier = {
				factor = 2
				OR = {
					has_ethic = "ethic_fanatic_xenophobe"
					has_ethic = "ethic_xenophobe"
				}
			}
		}
		
		pop_happiness = {
			base = 0
			modifier = {
				add = -0.05
				pop_has_ethic = "ethic_xenophile"
				NOT = { pop_has_trait = trait_decadent }
				owner = {
					is_same_species = ROOT
				}
			}
			modifier = {
				add = -0.1
				pop_has_ethic = "ethic_fanatic_xenophile"
				NOT = { pop_has_trait = trait_decadent }
				owner = {
					is_same_species = ROOT
				}
			}
			modifier = {
				add = -0.05
				pop_has_ethic = "ethic_collectivist"
				NOT = { pop_has_trait = trait_decadent }
				owner = {
					NOT = { is_same_species = ROOT }
				}
			}
			modifier = {
				add = -0.05
				NOT = {
					pop_has_ethic = "ethic_collectivist" 
					pop_has_ethic = "ethic_fanatic_collectivist"
					pop_has_trait = trait_decadent
				}
				owner = {
					NOT = { is_same_species = ROOT }
				}
			}
		}
	}
	
	option = {
		name = "nerve_stapling_allowed_all"
		
		prerequisites = {
			"tech_nerve_stapling"
		}
		
		valid = {
			NOT = {
				has_ethic = "ethic_individualist"
				has_ethic = "ethic_fanatic_individualist"
			}			
		}
		
		policy_flags = {
			nerve_stapling_allowed_all
		}
		modifier = {}
		
		AI_weight = {
			modifier = {
				factor = 2
				OR = {
					has_ethic = "ethic_fanatic_collectivist"
					has_ethic = "ethic_collectivist"
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					has_ethic = "ethic_fanatic_xenophobe"
					has_ethic = "ethic_xenophobe"
				}
				NOT = {
					has_ethic = "ethic_fanatic_individualist"
					has_ethic = "ethic_individualist"
				}
			}
		}
		
		pop_happiness = {
			base = 0
			modifier = {
				add = -0.05
				pop_has_ethic = "ethic_individualist"
				NOT = { pop_has_trait = trait_decadent }
			}
			modifier = {
				add = -0.1
				pop_has_ethic = "ethic_fanatic_individualist"
				NOT = { pop_has_trait = trait_decadent }
			}
		}
	}
}
